# Инструкция по проверке валидации форм

## Быстрая проверка

### 1. Корзина (`/cart.html`)

1. **Откройте страницу корзины**
2. **Попробуйте отправить заказ без данных:**
   - Не заполняйте телефон → должно появиться сообщение "Укажите номер телефона"
   - Не ставьте галочку согласия → должно появиться предупреждение
   - Поле телефона должно подсветиться красным

3. **Попробуйте неверный формат телефона:**
   - Введите "123" → должно появиться "Номер телефона должен содержать минимум 10 цифр"
   - Поле должно подсветиться красным
   - Сообщение должно появиться под полем

4. **Валидация в реальном времени:**
   - Введите неполный номер телефона
   - Кликните вне поля (blur) → должна появиться ошибка
   - Начните вводить правильный номер → ошибка должна исчезнуть

5. **Успешная отправка:**
   - Заполните все поля правильно
   - Поставьте галочку согласия
   - Отправьте заказ → должно работать без ошибок

### 2. Форма контактов (`/contact.html`)

1. **Откройте страницу контактов**
2. **Проверьте валидацию телефона:**
   - Оставьте поле пустым → кнопка должна быть неактивна
   - Введите неполный номер → кнопка должна быть неактивна
   - Введите полный номер → кнопка должна стать активной

3. **Попробуйте отправить без согласия:**
   - Заполните телефон
   - Не ставьте галочку
   - Нажмите "Отправить" → должно появиться предупреждение

4. **Проверьте валидацию при отправке:**
   - Введите неверный формат телефона
   - Нажмите "Отправить" → должно появиться сообщение об ошибке под полем

### 3. Форма входа (`/login.html`)

1. **Откройте страницу входа**
2. **Попробуйте войти без данных:**
   - Оставьте логин пустым → должно появиться "Логин обязательно для заполнения"
   - Оставьте пароль пустым → должно появиться "Пароль обязательно для заполнения"
   - Поля должны подсветиться красным

3. **Проверьте минимальную длину:**
   - Введите логин из 2 символов → должно появиться "Логин должен содержать минимум 3 символа"
   - Введите пароль из 5 символов → должно появиться "Пароль должен содержать минимум 6 символов"

4. **Валидация в реальном времени:**
   - Введите короткий логин
   - Кликните вне поля → должна появиться ошибка
   - Исправьте → ошибка должна исчезнуть

## Проверка через консоль браузера

### 1. Откройте консоль (F12)

### 2. Проверьте наличие функций валидации

```javascript
// Проверка функций
console.log('validatePhone:', typeof validatePhone);
console.log('validateEmail:', typeof validateEmail);
console.log('showFieldError:', typeof showFieldError);
console.log('clearFieldError:', typeof clearFieldError);
console.log('initRealtimeValidation:', typeof initRealtimeValidation);
```

**Ожидаемый результат:** Все функции должны быть `function`

### 3. Тест валидации телефона

```javascript
// Валидный телефон
const result1 = validatePhone('+7 (999) 123-45-67');
console.log('Валидный:', result1); // {valid: true, message: ''}

// Невалидный телефон
const result2 = validatePhone('123');
console.log('Невалидный:', result2); // {valid: false, message: '...'}

// Пустой телефон
const result3 = validatePhone('');
console.log('Пустой:', result3); // {valid: false, message: '...'}
```

### 4. Тест визуальной обратной связи

```javascript
// Получить поле телефона
const phoneInput = document.getElementById('phone');

// Показать ошибку
showFieldError(phoneInput, 'Тестовое сообщение об ошибке');

// Очистить ошибку
clearFieldError(phoneInput);
```

**Ожидаемый результат:** 
- Поле должно подсветиться красным
- Под полем должно появиться сообщение
- При очистке всё должно вернуться в исходное состояние

### 5. Тест валидации email

```javascript
// Валидный email
validateEmail('test@example.com'); // {valid: true, message: ''}

// Невалидный email
validateEmail('invalid'); // {valid: false, message: '...'}
```

## Визуальная проверка

### Что должно быть видно:

✅ **Поля с ошибками:**
- Красная рамка вокруг поля
- Красный фон (слегка прозрачный)
- Красное свечение при фокусе

✅ **Сообщения об ошибках:**
- Появляются под полем
- Красный цвет текста
- Плавная анимация появления
- Исчезают при исправлении ошибки

✅ **Валидация в реальном времени:**
- Ошибка появляется при потере фокуса (blur)
- Ошибка исчезает при начале ввода (input)

## Проверка HTML5 валидации

### 1. Отключите JavaScript (DevTools → Settings → Disable JavaScript)

### 2. Попробуйте отправить форму

**Ожидаемый результат:**
- Браузер покажет стандартные сообщения HTML5 валидации
- Форма не отправится, если поля не заполнены

### 3. Включите JavaScript обратно

## Типичные проблемы и решения

### Проблема: Валидация не работает

**Решение:**
1. Проверьте, что `utils.js` загружен (Network в DevTools)
2. Проверьте консоль на ошибки
3. Убедитесь, что функции доступны: `typeof validatePhone === 'function'`

### Проблема: Сообщения не появляются

**Решение:**
1. Проверьте, что CSS стили загружены
2. Проверьте, что элемент `.field-error-message` создается в DOM
3. Проверьте z-index и позиционирование

### Проблема: Валидация срабатывает дважды

**Решение:**
1. Убедитесь, что обработчики событий не дублируются
2. Проверьте, что `initRealtimeValidation` вызывается только один раз

## Автоматическая проверка

Можно использовать этот скрипт в консоли для автоматической проверки:

```javascript
// Автоматическая проверка валидации
function testValidation() {
  const tests = [];
  
  // Тест валидации телефона
  tests.push({
    name: 'Валидация телефона - валидный',
    result: validatePhone('+7 (999) 123-45-67').valid === true
  });
  
  tests.push({
    name: 'Валидация телефона - невалидный',
    result: validatePhone('123').valid === false
  });
  
  tests.push({
    name: 'Валидация телефона - пустой',
    result: validatePhone('').valid === false
  });
  
  // Тест валидации email
  tests.push({
    name: 'Валидация email - валидный',
    result: validateEmail('test@example.com').valid === true
  });
  
  tests.push({
    name: 'Валидация email - невалидный',
    result: validateEmail('invalid').valid === false
  });
  
  // Вывод результатов
  console.log('Результаты тестирования:');
  tests.forEach(test => {
    console.log(test.result ? '✅' : '❌', test.name);
  });
  
  const passed = tests.filter(t => t.result).length;
  console.log(`\nПройдено: ${passed}/${tests.length}`);
}

// Запустить тесты
testValidation();
```

## Что проверить в продакшене

1. **Разные браузеры:**
   - Chrome
   - Firefox
   - Safari
   - Edge

2. **Мобильные устройства:**
   - Проверьте на реальных устройствах
   - Проверьте видимость сообщений об ошибках

3. **Разные сценарии:**
   - Быстрая отправка формы
   - Медленный ввод
   - Копирование-вставка данных
   - Автозаполнение браузера
