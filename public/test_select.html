<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест селекта товаров</title>
    <link rel="stylesheet" href="css/pages/proposal_form.css">
</head>
<body>
    <div class="container">
        <h1>Тест нового селекта товаров</h1>

        <div class="form-grid">
            <div class="form-group">
                <label for="product_search">Выберите товар или аттракцион</label>
                <div class="searchable-select-container">
                    <input type="text" id="product_search" placeholder="Начните вводить название...">
                    <input type="hidden" id="product_select">
                    <div id="product_dropdown" class="searchable-select-dropdown">
                        <!-- Опции будут загружены через JS -->
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="product_quantity">Количество</label>
                <input type="number" id="product_quantity" min="1" value="1">
            </div>
        </div>

        <button id="add-product-btn" disabled>Выберите товар</button>

        <div id="selected-products"></div>
    </div>

    <script src="js/proposal_form.js"></script>
    <script>
        // Простая заглушка для тестирования
        document.addEventListener('DOMContentLoaded', function() {
            // Переопределяем DOM элементы для теста
            window.addProductBtn = document.getElementById('add-product-btn');
            window.productList = document.getElementById('selected-products');
            window.totalAmountSpan = { textContent: '0 ₽' };
            window.selectedProductsJsonInput = { value: '[]' };
            window.selectedProducts = [];

            // Функция для рендеринга выбранных товаров
            window.renderSelectedProducts = function() {
                const container = document.getElementById('selected-products');
                container.innerHTML = '<h3>Выбранные товары:</h3>';
                selectedProducts.forEach(item => {
                    container.innerHTML += `<p>${item.product.title} x ${item.quantity} = ${item.product.price * item.quantity} ₽</p>`;
                });
            };

            // Функция для пересчета суммы
            window.calculateTotal = function() {
                // Заглушка
            };
        });
    </script>
</body>
</html>
