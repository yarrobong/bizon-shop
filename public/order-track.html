<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Система отслеживания заказов</title>
    <link rel="icon" type="image/png" href="/assets/icons/favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/assets/icons/favicon/favicon.svg" />
    <link rel="shortcut icon" href="/assets/icons/favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/favicon/apple-touch-icon.png" />
    <link rel="manifest" href="/assets/icons/favicon/site.webmanifest" />
    <link rel="stylesheet" href="css/pages/admin.css">
    <style>
        /* Стили для новой системы */
        .logistics-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .logistics-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .logistics-tab-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: #ecf0f1;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .logistics-tab-btn:hover {
            background-color: #d5dbdb;
        }
        
        .logistics-tab-btn.active {
            background-color: #3498db;
            color: white;
        }
        
        .logistics-tab-content {
            display: none;
            padding: 20px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .logistics-tab-content.active {
            display: block;
        }
        
        .logistics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .logistics-card {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            background: #fafafa;
        }
        
        .logistics-card h3 {
            margin: 10px 0 5px;
            font-size: 1.1em;
        }
        
        .logistics-card p {
            margin: 5px 0;
            color: #666;
            font-size: 0.9em;
        }
        
        .logistics-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: bold;
        }
        
        .status-оформлен { background-color: #3498db; color: white; }
        .status-в-пути { background-color: #f39c12; color: white; }
        .status-частично-получен { background-color: #9b59b6; color: white; }
        .status-закрыт { background-color: #2ecc71; color: white; }
        .status-оплачено { background-color: #1abc9c; color: white; }
        .status-не-оплачено { background-color: #e74c3c; color: white; }
        .status-частично { background-color: #f1c40f; color: white; }
        
        .shipment-details {
            margin: 10px 0;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 4px;
        }
        
        .distribution-item {
            margin: 5px 0;
            padding: 8px;
            background-color: #e8f4f8;
            border-radius: 4px;
        }
        
        .payment-item {
            margin: 5px 0;
            padding: 8px;
            background-color: #e8f5e8;
            border-radius: 4px;
        }
        
        .logistics-search {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .logistics-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .logistics-table th,
        .logistics-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        
        .logistics-table th {
            background-color: #f5f5f5;
        }
        
        .logistics-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .logistics-form-row {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .logistics-form-field {
            flex: 1;
            min-width: 200px;
        }
        
        .logistics-form label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .logistics-form input,
        .logistics-form select,
        .logistics-form textarea {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1em;
        }
        
        .logistics-form textarea {
            min-height: 100px;
        }
        
        .logistics-form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }
        
        .logistics-stats {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: #3498db;
            color: white;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: bold;
        }
        
        .stat-label {
            font-size: 0.9em;
        }
        
        .order-details-section {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }
        
        .order-details-section h4 {
            margin-top: 0;
        }
    </style>
</head>
<body>
    <div class="logistics-container">
        <header class="admin-header">
            <h1>Система отслеживания заказов</h1>
            <button id="logistics-logout-btn" class="btn-danger">Выйти</button>
        </header>

        <nav class="logistics-nav">
            <button class="logistics-tab-btn active" data-tab="orders">Заказы</button>
            <button class="logistics-tab-btn" data-tab="clients">Клиенты</button>
            <button class="logistics-tab-btn" data-tab="buyers">Баеры</button>
            <button class="logistics-tab-btn" data-tab="shipments">Партии</button>
            <button class="logistics-tab-btn" data-tab="distribution">Распределение</button>
            <button class="logistics-tab-btn" data-tab="payments">Платежи</button>
        </nav>

        <main class="logistics-main">
            <!-- Вкладка Заказы -->
            <section id="orders-tab" class="logistics-tab-content active">
                <div class="tab-header">
                    <h2>Заказы</h2>
                    <button id="add-order-btn" class="btn-primary">Добавить заказ</button>
                </div>
                
                <input type="text" id="orders-search" class="logistics-search" placeholder="Поиск по номеру заказа или клиенту...">
                
                <div class="logistics-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="total-orders">0</div>
                        <div class="stat-label">Всего заказов</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="active-orders">0</div>
                        <div class="stat-label">Активные заказы</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="pending-shipments">0</div>
                        <div class="stat-label">В ожидании доставки</div>
                    </div>
                </div>
                
                <div id="orders-grid" class="logistics-grid">
                    <!-- Заказы будут загружаться сюда -->
                    <div class="empty">Загрузка заказов...</div>
                </div>
            </section>

            <!-- Вкладка Клиенты -->
            <section id="clients-tab" class="logistics-tab-content">
                <div class="tab-header">
                    <h2>Клиенты</h2>
                    <button id="add-client-btn" class="btn-primary">Добавить клиента</button>
                </div>
                
                <input type="text" id="clients-search" class="logistics-search" placeholder="Поиск по имени или контакту...">
                
                <div id="clients-grid" class="logistics-grid">
                    <!-- Клиенты будут загружаться сюда -->
                    <div class="empty">Загрузка клиентов...</div>
                </div>
            </section>

            <!-- Вкладка Баеры -->
            <section id="buyers-tab" class="logistics-tab-content">
                <div class="tab-header">
                    <h2>Баеры</h2>
                    <button id="add-buyer-btn" class="btn-primary">Добавить баера</button>
                </div>
                
                <input type="text" id="buyers-search" class="logistics-search" placeholder="Поиск по имени или контакту...">
                
                <div id="buyers-grid" class="logistics-grid">
                    <!-- Баеры будут загружаться сюда -->
                    <div class="empty">Загрузка баеров...</div>
                </div>
            </section>

            <!-- Вкладка Партии -->
            <section id="shipments-tab" class="logistics-tab-content">
                <div class="tab-header">
                    <h2>Партии</h2>
                    <button id="add-shipment-btn" class="btn-primary">Добавить партию</button>
                </div>
                
                <input type="text" id="shipments-search" class="logistics-search" placeholder="Поиск по номеру или заказу...">
                
                <div id="shipments-grid" class="logistics-grid">
                    <!-- Партии будут загружаться сюда -->
                    <div class="empty">Загрузка партий...</div>
                </div>
            </section>

            <!-- Вкладка Распределение -->
            <section id="distribution-tab" class="logistics-tab-content">
                <div class="tab-header">
                    <h2>Распределение</h2>
                    <button id="add-distribution-btn" class="btn-primary">Добавить распределение</button>
                </div>
                
                <input type="text" id="distribution-search" class="logistics-search" placeholder="Поиск по адресу или клиенту...">
                
                <div id="distribution-grid" class="logistics-grid">
                    <!-- Распределение будет загружаться сюда -->
                    <div class="empty">Загрузка распределения...</div>
                </div>
            </section>

            <!-- Вкладка Платежи -->
            <section id="payments-tab" class="logistics-tab-content">
                <div class="tab-header">
                    <h2>Платежи</h2>
                    <button id="add-payment-btn" class="btn-primary">Добавить платеж</button>
                </div>
                
                <input type="text" id="payments-search" class="logistics-search" placeholder="Поиск по сумме или описанию...">
                
                <div id="payments-grid" class="logistics-grid">
                    <!-- Платежи будут загружаться сюда -->
                    <div class="empty">Загрузка платежей...</div>
                </div>
            </section>
        </main>
    </div>

    <!-- Модальное окно для заказа -->
    <div id="order-modal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <span class="close">&times;</span>
            <h2 id="order-modal-title">Добавить заказ</h2>
            <form id="order-form" class="logistics-form">
                <input type="hidden" id="order-id" name="order-id">
                
                <div class="logistics-form-row">
                    <div class="logistics-form-field">
                        <label for="order-number">Номер заказа:</label>
                        <input type="text" id="order-number" name="order-number" required>
                    </div>
                    
                    <div class="logistics-form-field">
                        <label for="buyer-order-number">Номер у баера:</label>
                        <input type="text" id="buyer-order-number" name="buyer-order-number">
                    </div>
                </div>
                
                <div class="logistics-form-row">
                    <div class="logistics-form-field">
                        <label for="client-select">Клиент:</label>
                        <select id="client-select" name="client-select" required>
                            <option value="">Выберите клиента</option>
                        </select>
                    </div>
                    
                    <div class="logistics-form-field">
                        <label for="buyer-select">Баер:</label>
                        <select id="buyer-select" name="buyer-select" required>
                            <option value="">Выберите баера</option>
                        </select>
                    </div>
                </div>
                
                <div class="logistics-form-row">
                    <div class="logistics-form-field">
                        <label for="order-date">Дата заказа:</label>
                        <input type="date" id="order-date" name="order-date" required>
                    </div>
                    
                    <div class="logistics-form-field">
                        <label for="order-status">Статус:</label>
                        <select id="order-status" name="order-status" required>
                            <option value="оформлен">Оформлен</option>
                            <option value="в пути">В пути</option>
                            <option value="частично получен">Частично получен</option>
                            <option value="закрыт">Закрыт</option>
                        </select>
                    </div>
                </div>
                
                <div class="logistics-form-field">
                    <label for="order-description">Описание:</label>
                    <textarea id="order-description" name="order-description"></textarea>
                </div>
                
                <div class="logistics-form-field">
                    <label for="order-comments">Комментарии:</label>
                    <textarea id="order-comments" name="order-comments"></textarea>
                </div>
                
                <div class="logistics-form-actions">
                    <button type="button" id="cancel-order-btn" class="btn-secondary">Отмена</button>
                    <button type="submit" class="btn-primary">Сохранить</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Модальное окно для клиента -->
    <div id="client-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="client-modal-title">Добавить клиента</h2>
            <form id="client-form" class="logistics-form">
                <input type="hidden" id="client-id" name="client-id">
                
                <div class="logistics-form-field">
                    <label for="client-name">Имя:</label>
                    <input type="text" id="client-name" name="client-name" required>
                </div>
                
                <div class="logistics-form-field">
                    <label for="client-contact">Контакт:</label>
                    <input type="text" id="client-contact" name="client-contact">
                </div>
                
                <div class="logistics-form-field">
                    <label for="client-address">Адрес:</label>
                    <textarea id="client-address" name="client-address"></textarea>
                </div>
                
                <div class="logistics-form-field">
                    <label for="client-notes">Примечания:</label>
                    <textarea id="client-notes" name="client-notes"></textarea>
                </div>
                
                <div class="logistics-form-actions">
                    <button type="button" id="cancel-client-btn" class="btn-secondary">Отмена</button>
                    <button type="submit" class="btn-primary">Сохранить</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Модальное окно для баера -->
    <div id="buyer-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="buyer-modal-title">Добавить баера</h2>
            <form id="buyer-form" class="logistics-form">
                <input type="hidden" id="buyer-id" name="buyer-id">
                
                <div class="logistics-form-field">
                    <label for="buyer-name">Имя:</label>
                    <input type="text" id="buyer-name" name="buyer-name" required>
                </div>
                
                <div class="logistics-form-field">
                    <label for="buyer-contact">Контакт:</label>
                    <input type="text" id="buyer-contact" name="buyer-contact">
                </div>
                
                <div class="logistics-form-field">
                    <label for="buyer-notes">Примечания:</label>
                    <textarea id="buyer-notes" name="buyer-notes"></textarea>
                </div>
                
                <div class="logistics-form-actions">
                    <button type="button" id="cancel-buyer-btn" class="btn-secondary">Отмена</button>
                    <button type="submit" class="btn-primary">Сохранить</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Модальное окно для партии -->
    <div id="shipment-modal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <span class="close">&times;</span>
            <h2 id="shipment-modal-title">Добавить партию</h2>
            <form id="shipment-form" class="logistics-form">
                <input type="hidden" id="shipment-id" name="shipment-id">
                
                <div class="logistics-form-row">
                    <div class="logistics-form-field">
                        <label for="shipment-order">Заказ:</label>
                        <select id="shipment-order" name="shipment-order" required>
                            <option value="">Выберите заказ</option>
                        </select>
                    </div>
                    
                    <div class="logistics-form-field">
                        <label for="shipment-number">Номер партии:</label>
                        <input type="text" id="shipment-number" name="shipment-number" placeholder="Например: 1/3">
                    </div>
                </div>
                
                <div class="logistics-form-row">
                    <div class="logistics-form-field">
                        <label for="tracking-number">Трек-номер:</label>
                        <input type="text" id="tracking-number" name="tracking-number">
                    </div>
                    
                    <div class="logistics-form-field">
                        <label for="departure-date">Дата отправки:</label>
                        <input type="date" id="departure-date" name="departure-date">
                    </div>
                </div>
                
                <div class="logistics-form-row">
                    <div class="logistics-form-field">
                        <label for="arrival-date">Дата прибытия:</label>
                        <input type="date" id="arrival-date" name="arrival-date">
                    </div>
                    
                    <div class="logistics-form-field">
                        <label for="shipment-status">Статус:</label>
                        <select id="shipment-status" name="shipment-status">
                            <option value="в пути">В пути</option>
                            <option value="получена">Получена</option>
                        </select>
                    </div>
                </div>
                
                <div class="logistics-form-row">
                    <div class="logistics-form-field">
                        <label for="delivery-cost">Стоимость доставки:</label>
                        <input type="number" id="delivery-cost" name="delivery-cost" step="0.01">
                    </div>
                    
                    <div class="logistics-form-field">
                        <label for="payment-status">Статус оплаты:</label>
                        <select id="payment-status" name="payment-status">
                            <option value="оплачено">Оплачено</option>
                            <option value="не оплачено">Не оплачено</option>
                            <option value="частично">Частично</option>
                        </select>
                    </div>
                </div>
                
                <div class="logistics-form-field">
                    <label for="shipment-comments">Комментарии:</label>
                    <textarea id="shipment-comments" name="shipment-comments"></textarea>
                </div>
                
                <div class="logistics-form-actions">
                    <button type="button" id="cancel-shipment-btn" class="btn-secondary">Отмена</button>
                    <button type="submit" class="btn-primary">Сохранить</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Модальное окно для распределения -->
    <div id="distribution-modal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <span class="close">&times;</span>
            <h2 id="distribution-modal-title">Добавить распределение</h2>
            <form id="distribution-form" class="logistics-form">
                <input type="hidden" id="distribution-id" name="distribution-id">
                
                <div class="logistics-form-row">
                    <div class="logistics-form-field">
                        <label for="distribution-shipment">Партия:</label>
                        <select id="distribution-shipment" name="distribution-shipment" required>
                            <option value="">Выберите партию</option>
                        </select>
                    </div>
                    
                    <div class="logistics-form-field">
                        <label for="distribution-client">Клиент:</label>
                        <select id="distribution-client" name="distribution-client" required>
                            <option value="">Выберите клиента</option>
                        </select>
                    </div>
                </div>
                
                <div class="logistics-form-field">
                    <label for="distribution-address">Адрес:</label>
                    <textarea id="distribution-address" name="distribution-address" required></textarea>
                </div>
                
                <div class="logistics-form-field">
                    <label for="item-description">Описание товара:</label>
                    <textarea id="item-description" name="item-description"></textarea>
                </div>
                
                <div class="logistics-form-row">
                    <div class="logistics-form-field">
                        <label for="quantity">Количество:</label>
                        <input type="number" id="quantity" name="quantity" min="1">
                    </div>
                    
                    <div class="logistics-form-field">
                        <label for="delivery-cost-rf">Стоимость доставки РФ:</label>
                        <input type="number" id="delivery-cost-rf" name="delivery-cost-rf" step="0.01">
                    </div>
                </div>
                
                <div class="logistics-form-row">
                    <div class="logistics-form-field">
                        <label for="payment-status-rf">Статус оплаты:</label>
                        <select id="payment-status-rf" name="payment-status-rf">
                            <option value="оплачено">Оплачено</option>
                            <option value="не оплачено">Не оплачено</option>
                        </select>
                    </div>
                    
                    <div class="logistics-form-field">
                        <label for="distribution-status">Статус:</label>
                        <select id="distribution-status" name="distribution-status">
                            <option value="отправлено">Отправлено</option>
                            <option value="получено">Получено</option>
                        </select>
                    </div>
                </div>
                
                <div class="logistics-form-actions">
                    <button type="button" id="cancel-distribution-btn" class="btn-secondary">Отмена</button>
                    <button type="submit" class="btn-primary">Сохранить</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Модальное окно для платежа -->
    <div id="payment-modal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <span class="close">&times;</span>
            <h2 id="payment-modal-title">Добавить платеж</h2>
            <form id="payment-form" class="logistics-form">
                <input type="hidden" id="payment-id" name="payment-id">
                
                <div class="logistics-form-row">
                    <div class="logistics-form-field">
                        <label for="payment-order">Заказ:</label>
                        <select id="payment-order" name="payment-order">
                            <option value="">Выберите заказ</option>
                        </select>
                    </div>
                    
                    <div class="logistics-form-field">
                        <label for="payment-shipment">Партия:</label>
                        <select id="payment-shipment" name="payment-shipment">
                            <option value="">Выберите партию</option>
                        </select>
                    </div>
                </div>
                
                <div class="logistics-form-row">
                    <div class="logistics-form-field">
                        <label for="payment-distribution">Распределение:</label>
                        <select id="payment-distribution" name="payment-distribution">
                            <option value="">Выберите распределение</option>
                        </select>
                    </div>
                    
                    <div class="logistics-form-field">
                        <label for="amount">Сумма:</label>
                        <input type="number" id="amount" name="amount" step="0.01" required>
                    </div>
                </div>
                
                <div class="logistics-form-row">
                    <div class="logistics-form-field">
                        <label for="currency">Валюта:</label>
                        <select id="currency" name="currency">
                            <option value="RUB">RUB</option>
                            <option value="USD">USD</option>
                            <option value="EUR">EUR</option>
                        </select>
                    </div>
                    
                    <div class="logistics-form-field">
                        <label for="payment-date">Дата:</label>
                        <input type="date" id="payment-date" name="payment-date">
                    </div>
                </div>
                
                <div class="logistics-form-row">
                    <div class="logistics-form-field">
                        <label for="payment-type">Тип:</label>
                        <select id="payment-type" name="payment-type">
                            <option value="перевод">Перевод</option>
                            <option value="наличные">Наличные</option>
                            <option value="другое">Другое</option>
                        </select>
                    </div>
                    
                    <div class="logistics-form-field">
                        <label for="direction">Направление:</label>
                        <select id="direction" name="direction">
                            <option value="входящий">Входящий</option>
                            <option value="исходящий">Исходящий</option>
                        </select>
                    </div>
                </div>
                
                <div class="logistics-form-field">
                    <label for="payment-notes">Примечания:</label>
                    <textarea id="payment-notes" name="payment-notes"></textarea>
                </div>
                
                <div class="logistics-form-actions">
                    <button type="button" id="cancel-payment-btn" class="btn-secondary">Отмена</button>
                    <button type="submit" class="btn-primary">Сохранить</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Основной скрипт для системы отслеживания заказов
        document.addEventListener('DOMContentLoaded', function() {
            // Переключение вкладок
            const tabButtons = document.querySelectorAll('.logistics-tab-btn');
            const tabContents = document.querySelectorAll('.logistics-tab-content');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.getAttribute('data-tab');
                    
                    // Удалить активный класс у всех кнопок и вкладок
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));
                    
                    // Добавить активный класс к текущей кнопке и вкладке
                    button.classList.add('active');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                    
                    // Загрузить данные для активной вкладки
                    loadData(tabId);
                });
            });
            
            // Функция для загрузки данных
            function loadData(tabName) {
                switch(tabName) {
                    case 'orders':
                        loadOrders();
                        break;
                    case 'clients':
                        loadClients();
                        break;
                    case 'buyers':
                        loadBuyers();
                        break;
                    case 'shipments':
                        loadShipments();
                        break;
                    case 'distribution':
                        loadDistribution();
                        break;
                    case 'payments':
                        loadPayments();
                        break;
                }
            }
            
            // Функция для показа сообщения
            function showMessage(message, type = 'info') {
                const messageEl = document.createElement('div');
                messageEl.className = `admin-message ${type}`;
                messageEl.textContent = message;
                
                document.body.appendChild(messageEl);
                
                setTimeout(() => {
                    messageEl.remove();
                }, 3000);
            }
            
            // Обработчики для модальных окон
            const modals = {
                order: {
                    modal: document.getElementById('order-modal'),
                    openBtn: document.getElementById('add-order-btn'),
                    form: document.getElementById('order-form'),
                    title: document.getElementById('order-modal-title'),
                    id: document.getElementById('order-id')
                },
                client: {
                    modal: document.getElementById('client-modal'),
                    openBtn: document.getElementById('add-client-btn'),
                    form: document.getElementById('client-form'),
                    title: document.getElementById('client-modal-title'),
                    id: document.getElementById('client-id')
                },
                buyer: {
                    modal: document.getElementById('buyer-modal'),
                    openBtn: document.getElementById('add-buyer-btn'),
                    form: document.getElementById('buyer-form'),
                    title: document.getElementById('buyer-modal-title'),
                    id: document.getElementById('buyer-id')
                },
                shipment: {
                    modal: document.getElementById('shipment-modal'),
                    openBtn: document.getElementById('add-shipment-btn'),
                    form: document.getElementById('shipment-form'),
                    title: document.getElementById('shipment-modal-title'),
                    id: document.getElementById('shipment-id')
                },
                distribution: {
                    modal: document.getElementById('distribution-modal'),
                    openBtn: document.getElementById('add-distribution-btn'),
                    form: document.getElementById('distribution-form'),
                    title: document.getElementById('distribution-modal-title'),
                    id: document.getElementById('distribution-id')
                },
                payment: {
                    modal: document.getElementById('payment-modal'),
                    openBtn: document.getElementById('add-payment-btn'),
                    form: document.getElementById('payment-form'),
                    title: document.getElementById('payment-modal-title'),
                    id: document.getElementById('payment-id')
                }
            };
            
            // Открытие модальных окон
            Object.keys(modals).forEach(key => {
                const modal = modals[key];
                
                modal.openBtn.addEventListener('click', () => {
                    modal.id.value = '';
                    modal.title.textContent = `Добавить ${key}`;
                    modal.form.reset();
                    modal.modal.style.display = 'block';
                });
                
                // Закрытие модальных окон
                modal.modal.querySelector('.close').addEventListener('click', () => {
                    modal.modal.style.display = 'none';
                });
                
                // Отмена в формах
                const cancelBtn = document.getElementById(`cancel-${key}-btn`);
                if (cancelBtn) {
                    cancelBtn.addEventListener('click', () => {
                        modal.modal.style.display = 'none';
                    });
                }
            });
            
            // Логика для формы заказа
            document.getElementById('order-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const orderId = document.getElementById('order-id').value;
                const orderData = {
                    number: document.getElementById('order-number').value,
                    buyerNumber: document.getElementById('buyer-order-number').value,
                    clientId: document.getElementById('client-select').value,
                    buyerId: document.getElementById('buyer-select').value,
                    date: document.getElementById('order-date').value,
                    status: document.getElementById('order-status').value,
                    description: document.getElementById('order-description').value,
                    comments: document.getElementById('order-comments').value
                };
                
                // Здесь будет вызов API для сохранения заказа
                console.log('Сохранение заказа:', orderData);
                
                // Показать сообщение об успехе
                showMessage('Заказ сохранен успешно!', 'success');
                
                // Закрыть модальное окно
                document.getElementById('order-modal').style.display = 'none';
                
                // Перезагрузить данные
                loadOrders();
            });
            
            // Логика для формы клиента
            document.getElementById('client-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const clientData = {
                    name: document.getElementById('client-name').value,
                    contact: document.getElementById('client-contact').value,
                    address: document.getElementById('client-address').value,
                    notes: document.getElementById('client-notes').value
                };
                
                console.log('Сохранение клиента:', clientData);
                showMessage('Клиент сохранен успешно!', 'success');
                
                document.getElementById('client-modal').style.display = 'none';
                loadClients();
            });
            
            // Логика для формы баера
            document.getElementById('buyer-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const buyerData = {
                    name: document.getElementById('buyer-name').value,
                    contact: document.getElementById('buyer-contact').value,
                    notes: document.getElementById('buyer-notes').value
                };
                
                console.log('Сохранение баера:', buyerData);
                showMessage('Баер сохранен успешно!', 'success');
                
                document.getElementById('buyer-modal').style.display = 'none';
                loadBuyers();
            });
            
            // Логика для формы партии
            document.getElementById('shipment-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const shipmentData = {
                    orderId: document.getElementById('shipment-order').value,
                    number: document.getElementById('shipment-number').value,
                    tracking: document.getElementById('tracking-number').value,
                    departure: document.getElementById('departure-date').value,
                    arrival: document.getElementById('arrival-date').value,
                    status: document.getElementById('shipment-status').value,
                    cost: document.getElementById('delivery-cost').value,
                    paymentStatus: document.getElementById('payment-status').value,
                    comments: document.getElementById('shipment-comments').value
                };
                
                console.log('Сохранение партии:', shipmentData);
                showMessage('Партия сохранена успешно!', 'success');
                
                document.getElementById('shipment-modal').style.display = 'none';
                loadShipments();
            });
            
            // Логика для формы распределения
            document.getElementById('distribution-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const distributionData = {
                    shipmentId: document.getElementById('distribution-shipment').value,
                    clientId: document.getElementById('distribution-client').value,
                    address: document.getElementById('distribution-address').value,
                    description: document.getElementById('item-description').value,
                    quantity: document.getElementById('quantity').value,
                    deliveryCost: document.getElementById('delivery-cost-rf').value,
                    paymentStatus: document.getElementById('payment-status-rf').value,
                    status: document.getElementById('distribution-status').value
                };
                
                console.log('Сохранение распределения:', distributionData);
                showMessage('Распределение сохранено успешно!', 'success');
                
                document.getElementById('distribution-modal').style.display = 'none';
                loadDistribution();
            });
            
            // Логика для формы платежа
            document.getElementById('payment-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const paymentData = {
                    orderId: document.getElementById('payment-order').value,
                    shipmentId: document.getElementById('payment-shipment').value,
                    distributionId: document.getElementById('payment-distribution').value,
                    amount: document.getElementById('amount').value,
                    currency: document.getElementById('currency').value,
                    date: document.getElementById('payment-date').value,
                    type: document.getElementById('payment-type').value,
                    direction: document.getElementById('direction').value,
                    notes: document.getElementById('payment-notes').value
                };
                
                console.log('Сохранение платежа:', paymentData);
                showMessage('Платеж сохранен успешно!', 'success');
                
                document.getElementById('payment-modal').style.display = 'none';
                loadPayments();
            });
            
            // Заглушка для загрузки данных
            function loadOrders() {
                // Здесь будет вызов API для получения заказов
                const ordersGrid = document.getElementById('orders-grid');
                ordersGrid.innerHTML = `
                    <div class="logistics-card">
                        <h3>Заказ #ORD-001</h3>
                        <p><strong>Клиент:</strong> Иванов И.И.</p>
                        <p><strong>Баер:</strong> Китайский поставщик</p>
                        <p><strong>Дата:</strong> 2023-10-15</p>
                        <p><strong>Статус:</strong> <span class="status-badge status-оформлен">Оформлен</span></p>
                        <div class="logistics-actions">
                            <button class="btn-primary">Редактировать</button>
                            <button class="btn-danger">Удалить</button>
                        </div>
                    </div>
                    <div class="logistics-card">
                        <h3>Заказ #ORD-002</h3>
                        <p><strong>Клиент:</strong> Петров П.П.</p>
                        <p><strong>Баер:</strong> Shanghai Trading</p>
                        <p><strong>Дата:</strong> 2023-10-18</p>
                        <p><strong>Статус:</strong> <span class="status-badge status-в-пути">В пути</span></p>
                        <div class="logistics-actions">
                            <button class="btn-primary">Редактировать</button>
                            <button class="btn-danger">Удалить</button>
                        </div>
                    </div>
                `;
            }
            
            function loadClients() {
                const clientsGrid = document.getElementById('clients-grid');
                clientsGrid.innerHTML = `
                    <div class="logistics-card">
                        <h3>Иванов И.И.</h3>
                        <p><strong>Контакт:</strong> +7 (999) 123-45-67</p>
                        <p><strong>Адрес:</strong> Москва, ул. Примерная, д. 1</p>
                        <p><strong>Примечания:</strong> Постоянный клиент</p>
                        <div class="logistics-actions">
                            <button class="btn-primary">Редактировать</button>
                            <button class="btn-danger">Удалить</button>
                        </div>
                    </div>
                    <div class="logistics-card">
                        <h3>Петров П.П.</h3>
                        <p><strong>Контакт:</strong> +7 (999) 987-65-43</p>
                        <p><strong>Адрес:</strong> Санкт-Петербург, ул. Образцовая, д. 2</p>
                        <p><strong>Примечания:</strong> Новый клиент</p>
                        <div class="logistics-actions">
                            <button class="btn-primary">Редактировать</button>
                            <button class="btn-danger">Удалить</button>
                        </div>
                    </div>
                `;
            }
            
            function loadBuyers() {
                const buyersGrid = document.getElementById('buyers-grid');
                buyersGrid.innerHTML = `
                    <div class="logistics-card">
                        <h3>Китайский поставщик</h3>
                        <p><strong>Контакт:</strong> supplier@china.com</p>
                        <p><strong>Примечания:</strong> Надежный поставщик</p>
                        <div class="logistics-actions">
                            <button class="btn-primary">Редактировать</button>
                            <button class="btn-danger">Удалить</button>
                        </div>
                    </div>
                    <div class="logistics-card">
                        <h3>Shanghai Trading</h3>
                        <p><strong>Контакт:</strong> contact@shanghai.com</p>
                        <p><strong>Примечания:</strong> Новый партнер</p>
                        <div class="logistics-actions">
                            <button class="btn-primary">Редактировать</button>
                            <button class="btn-danger">Удалить</button>
                        </div>
                    </div>
                `;
            }
            
            function loadShipments() {
                const shipmentsGrid = document.getElementById('shipments-grid');
                shipmentsGrid.innerHTML = `
                    <div class="logistics-card">
                        <h3>Партия 1/3</h3>
                        <p><strong>Заказ:</strong> ORD-001</p>
                        <p><strong>Трек-номер:</strong> TR123456789</p>
                        <p><strong>Дата отправки:</strong> 2023-10-20</p>
                        <p><strong>Статус:</strong> <span class="status-badge status-в-пути">В пути</span></p>
                        <p><strong>Оплата:</strong> <span class="status-badge status-оплачено">Оплачено</span></p>
                        <div class="logistics-actions">
                            <button class="btn-primary">Редактировать</button>
                            <button class="btn-danger">Удалить</button>
                        </div>
                    </div>
                    <div class="logistics-card">
                        <h3>Партия 2/3</h3>
                        <p><strong>Заказ:</strong> ORD-002</p>
                        <p><strong>Трек-номер:</strong> TR987654321</p>
                        <p><strong>Дата отправки:</strong> 2023-10-22</p>
                        <p><strong>Статус:</strong> <span class="status-badge status-в-пути">В пути</span></p>
                        <p><strong>Оплата:</strong> <span class="status-badge status-не-оплачено">Не оплачено</span></p>
                        <div class="logistics-actions">
                            <button class="btn-primary">Редактировать</button>
                            <button class="btn-danger">Удалить</button>
                        </div>
                    </div>
                `;
            }
            
            function loadDistribution() {
                const distributionGrid = document.getElementById('distribution-grid');
                distributionGrid.innerHTML = `
                    <div class="logistics-card">
                        <h3>Распределение #1</h3>
                        <p><strong>Партия:</strong> 1/3</p>
                        <p><strong>Клиент:</strong> Иванов И.И.</p>
                        <p><strong>Адрес:</strong> Москва, ул. Примерная, д. 1</p>
                        <p><strong>Статус:</strong> <span class="status-badge status-отправлено">Отправлено</span></p>
                        <div class="logistics-actions">
                            <button class="btn-primary">Редактировать</button>
                            <button class="btn-danger">Удалить</button>
                        </div>
                    </div>
                    <div class="logistics-card">
                        <h3>Распределение #2</h3>
                        <p><strong>Партия:</strong> 2/3</p>
                        <p><strong>Клиент:</strong> Петров П.П.</p>
                        <p><strong>Адрес:</strong> Санкт-Петербург, ул. Образцовая, д. 2</p>
                        <p><strong>Статус:</strong> <span class="status-badge status-получено">Получено</span></p>
                        <div class="logistics-actions">
                            <button class="btn-primary">Редактировать</button>
                            <button class="btn-danger">Удалить</button>
                        </div>
                    </div>
                `;
            }
            
            function loadPayments() {
                const paymentsGrid = document.getElementById('payments-grid');
                paymentsGrid.innerHTML = `
                    <div class="logistics-card">
                        <h3>Платеж #1</h3>
                        <p><strong>Сумма:</strong> 15000 руб.</p>
                        <p><strong>Дата:</strong> 2023-10-15</p>
                        <p><strong>Тип:</strong> Перевод</p>
                        <p><strong>Направление:</strong> Входящий</p>
                        <div class="logistics-actions">
                            <button class="btn-primary">Редактировать</button>
                            <button class="btn-danger">Удалить</button>
                        </div>
                    </div>
                    <div class="logistics-card">
                        <h3>Платеж #2</h3>
                        <p><strong>Сумма:</strong> 5000 руб.</p>
                        <p><strong>Дата:</strong> 2023-10-18</p>
                        <p><strong>Тип:</strong> Наличные</p>
                        <p><strong>Направление:</strong> Исходящий</p>
                        <div class="logistics-actions">
                            <button class="btn-primary">Редактировать</button>
                            <button class="btn-danger">Удалить</button>
                        </div>
                    </div>
                `;
            }
            
            // Загрузка начальных данных
            loadOrders();
            
            // Обработчик выхода
            document.getElementById('logistics-logout-btn').addEventListener('click', function() {
                // Здесь будет вызов API для выхода
                console.log('Выход из системы');
                window.location.href = '/login'; // или другая страница
            });
            
            // Обработчики поиска
            document.getElementById('orders-search').addEventListener('input', function() {
                // Здесь будет логика поиска заказов
                console.log('Поиск заказов:', this.value);
            });
            
            document.getElementById('clients-search').addEventListener('input', function() {
                // Здесь будет логика поиска клиентов
                console.log('Поиск клиентов:', this.value);
            });
            
            document.getElementById('buyers-search').addEventListener('input', function() {
                // Здесь будет логика поиска баеров
                console.log('Поиск баеров:', this.value);
            });
            
            document.getElementById('shipments-search').addEventListener('input', function() {
                // Здесь будет логика поиска партий
                console.log('Поиск партий:', this.value);
            });
            
            document.getElementById('distribution-search').addEventListener('input', function() {
                // Здесь будет логика поиска распределений
                console.log('Поиск распределений:', this.value);
            });
            
            document.getElementById('payments-search').addEventListener('input', function() {
                // Здесь будет логика поиска платежей
                console.log('Поиск платежей:', this.value);
            });
        });
    </script>
</body>
</html>